#include <iostream>
#include <fstream>
#include <vector>
#include "tipsy.h"

int main()
{
    std::vector<dark_particle> vd{{0.005, 0.0, 0.0, 1000.0, 0.0, 0.0, 0.0, 0.0, 200000009}};
    std::vector<star_particle> vs{};

//    std::vector<dark_particle> vd{{0.00443292, -0.0120859, -0.0410267, -0.00437124, -1.605, -0.643298, -0.367065, 0.206867, 200000000},
//                                  {0.00443292, -0.0558513, -0.0209438, -0.0878785, 0.262374, -0.872229, -0.156694, 0.206867, 200000001},
//                                  {0.00443292, 0.0447762, -0.0448422, -0.0366114, -0.526952, -0.395124, 1.78094, 0.206867, 200000002},
//                                  {0.00443292, -0.0381424, -0.0317452, 0.0489303, -1.76929, 0.513822, -1.72173, 0.206867, 200000003},
//                                  {0.00443292, 0.158146, 0.0222634, 0.128441, 0.634014, -0.497379, -0.336336, 0.206867, 200000004},
//                                  {0.00443292, 0.188687, -0.111929, 0.0948612, -0.107827, 0.4779, -0.517985, 0.206867, 200000005},
//                                  {0.00443292, 0.179841, -0.142335, 0.0327414, -0.371021, -0.779585, -0.406808, 0.206867, 200000006},
//                                  {0.00443292, -0.0337725, 0.203328, -0.00501226, 0.0512849, 1.55558, -0.287626, 0.206867, 200000007}};
//
//    std::vector<star_particle> vs{{0.00430987, -0.0269203, 0.0215147, 0.00322919, -0.0424188, 0.809628, -0.663159, 0, 0, 0.204936, 100000000},
//                                  {0.00430987, 0.0070073, 0.0232225, 0.0373815, 0.783409, 1.0458, -0.00211907, 0, 0, 0.204936, 100000001},
//                                  {0.00430987, -0.0425167, 0.0320775, 0.0427321, 0.280932, -0.194072, 0.548338, 0, 0, 0.204936, 100000002},
//                                  {0.00430987, -0.0279896, 0.00917036, 0.0592467, -0.603823, -0.182352, -0.42594, 0, 0, 0.204936, 100000003},
//                                  {0.00430987, -0.01737, 0.0088137, 0.0705704, -0.320545, -0.58951, 0.346465, 0, 0, 0.204936, 100000004},
//                                  {0.00430987, -0.0247747, -0.0107097, -0.0589867, 0.0475681, 0.954196, -0.617804, 0, 0, 0.204936, 100000005},
//                                  {0.00430987, -0.0263219, -0.0303222, -0.0564402, -0.191889, 0.38757, 0.91078, 0, 0, 0.204936, 100000006},
//                                  {0.00430987, 0.0345237, -0.0248301, 0.0205758, 1.2972, 0.89203, 0.472138, 0, 0, 0.204936, 100000007}};

//    std::vector<dark_particle> vd{{0.0, 1000.0, 1000.0, 1000.0, 0.0, 0.0, 0.0, 0.0, 200000000},
//                                  {0.0, 1000.0, 1000.0, 1001.0, 0.0, 0.0, 0.0, 0.0, 200000001},
//                                  {0.0, 1000.0, 1000.0, 1002.0, 0.0, 0.0, 0.0, 0.0, 200000002},
//                                  {0.0, 1000.0, 1000.0, 1003.0, 0.0, 0.0, 0.0, 0.0, 200000003}};
//
//    std::vector<star_particle> vs{{0.0, 1000.0, 1001.0, 1000.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 100000000},
//                                  {0.0, 1000.0, 1001.0, 1001.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 100000001},
//                                  {0.0, 1000.0, 1001.0, 1002.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 100000002},
//                                  {0.0, 1000.0, 1001.0, 1003.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 100000003}};

    head h(0.0, vd.size() + vs.size(), DIM, 0, vd.size(), vs.size());

    std::ofstream os("test.tipsy", std::ios::binary);
    os.write((char*) &h, sizeof(h));

    for (auto const& d : vd) os.write((char*) &d, sizeof(d));
    for (auto const& s : vs) os.write((char*) &s, sizeof(s));
}
